var App=function(){var t=function(){$(window).scroll(function(){var t=$("#header"),i=$(window).scrollTop();i>=100?t.addClass("mini"):t.removeClass("mini")});var t=$("<div />");t.html('<i class="fa fa-chevron-up"></i>'),t.css({position:"fixed",bottom:"20px",right:"25px",width:"40px",height:"40px",color:"#eee","font-size":"","line-height":"40px","text-align":"center","background-color":"#222d32",cursor:"pointer","border-radius":"5px","z-index":"99999",opacity:".7",display:"none"}),t.on("mouseenter",function(){$(this).css("opacity","1")}),t.on("mouseout",function(){$(this).css("opacity",".7")}),$(".footer").append(t),$(window).scroll(function(){$(window).scrollTop()>=150?$(t).is(":visible")||$(t).fadeIn(500):$(t).fadeOut(500)}),$(t).click(function(){$("body").animate({scrollTop:0},500)})},i=function(){$("#searchbutton").on("click",function(t){var i=($(this),$(".search_link")),o=$("#searchbox_text").val();i.hasClass("active")?o.length>1?location.href="/search?q="+o:swal("Alert","Min 2 character required!"):i.addClass("active")}),$("#menu-toggler").on("click",function(t){var i=($(this),$("#colnav"));i.hasClass("active")?i.removeClass("active"):i.addClass("active")}),$(".popup-action").on("click",function(t){return o($(this).attr("href")),!1})},o=function(t){if(t>""){var i=600,o=400,n=screen.height/2-o/2,e=screen.width/2-i/2;return window.open(t,"sharer","top="+n+",left="+e+",toolbar=0,status=0,width="+i+",height="+o),!1}},n=function(){$(".jscroll").jscroll({loadingHtml:'<i style="top:40%;position:relative;" class="fa fa-spinner fa-pulse"></i>',padding:20,nextSelector:"a.page-next:last"})},e=function(){$(".blocker.ci").remove();var t='<div class="jquery-modal blocker ci" style="top: 0px; right: 0px; bottom: 0px; left: 0px; width: 100%; height: 100%; position: fixed; z-index: 100000; opacity: 0.75; background: rgba(0, 0, 0, .75);text-align:center;font-size:60px;color:#fff;"><i style="top:40%;position:relative;" class="fa fa-spinner fa-pulse"></i></div>';$("body").append(t)},a=function(){$(".blocker.ci").remove()},r=function(){var t=$(".postable");t.on("click",function(){NProgress.set(.4);var t=$(this).attr("href"),i=$(this).attr("data-method"),o=$(this).attr("data-target"),n=$(this).attr("data-message"),e=$(this).attr("data-puttype"),a=$(this).attr("data-type"),r=$("#requesttoken").val();return $.ajax({method:i,data:"_token="+r,url:t,success:function(t){"prepend"==e?$("#"+o).prepend(t):"append"==e?$("#"+o).append(t):$("#"+o).html(t),"textform"==a||("imageform"==a?BuzzyEditor.initImageUpluad():"videoform"==a&&BuzzyEditor.initVideoGet()),("textform"==a||"imageform"==a||"videoform"==a||"embedform"==a||"pollform"==a)&&BuzzyEditor.EditorInit(),n&&swal(n),App.initAjax(),NProgress.done(!0)}}),!1})},s=function(){$("#PostNewUser").on("click",function(){NProgress.set(.4),App.initLoadingCaption("show"),$("#auth-modal").hide();var t=$(this).closest("form");$.post(t.attr("action"),t.serialize(),function(t){t.errors?(swal(t.errors),$("#auth-modal").show()):swal({title:t.status,text:t.text,type:"success",timer:2e3,showConfirmButton:!1},function(){location.href=t.url}),App.initLoadingCaption("hide"),NProgress.set(1)},"json")})},c=function(){$("#PostUserLogin").on("click",function(){NProgress.set(.4),App.initLoadingCaption("show"),$("#auth-modal").hide();var t=$(this).closest("form"),i=t.attr("action"),o=t.serialize();$.post(i,o,function(t){t.errors?(swal(t.errors),$("#auth-modal").show()):location.href=t.url,App.initLoadingCaption("hide"),NProgress.set(1)},"json")})},l=function(){var t=$("#auth-modal");$('[rel="get:Signupform"]').click(function(){return t.find(".signup-form").length>0?(t.modal(),!1):($.ajax({method:"GET",url:$(this).attr("href"),success:function(i){t.html(i).modal(),s(),App.initAjax()}}),!1)})},d=function(){var t=$("#auth-modal");$('[rel="get:Loginform"]').click(function(){return t.find(".login-form").length>0?(t.modal(),!1):($.ajax({method:"GET",url:$(this).attr("href"),success:function(i){t.html(i).modal(),c(),App.initAjax()}}),!1)})};return{init:function(){t(),r(),i(),n(),this.initAjax()},initAjax:function(){l(),d()},initLoadingCaption:function(t){"show"==t?e():a()},initLoginClicks:function(){c()},initRegisterClicks:function(){s()}}}();