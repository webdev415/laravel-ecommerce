var BuzzyEditor=function(){var e=function(){},t=function(){$(".lists-types a").on("click",function(){$(".lists-types a").removeClass("selected").addClass("button-white").removeClass("button-gray"),$(this).addClass("selected").removeClass("button-white").addClass("button-gray"),i()}),$(".moredetail .trigger").off("click").on("click",function(){$(this).hasClass("active")?$(this).hasClass("active")&&($(this).parent().find(".detailhide").slideUp("fast"),$(this).removeClass("active"),$(this).find(".up").hide(),$(this).find(".down").show()):($(this).parent().find(".detailhide").slideDown("fast"),$(this).addClass("active"),$(this).find(".up").show(),$(this).find(".down").hide())}),$(".up-down-trigger").on("click",function(e){var t=$(this),n=t.parents(".entry");if(t.hasClass("up-entry")){var a=n.prev();n.insertBefore(a)}else if(t.hasClass("down-entry")){var o=n.next();n.insertAfter(o)}i()}),$(".delete-entry").on("click",function(e){var t=$(this);swal({title:"Are you sure?",text:"You will not be able to recover this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){t.parents(".entry").remove(),i()})}),$(".thumbactions a.deleteimage").on("click",function(e){var t=$(this),i=($(this).attr("data-action"),$(this).attr("data-target"));swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){"thumb"==i?($(".imagepr_wrap").html(""),$(".previewshow").hide(),$(".preview-placeholder").show(),$("#upwthumb").val("")):(t.parents(".entry").find(".imagearea_img").html(""),t.parents(".entry").find(".cd-input-image").val(""),t.parents(".entry").find(".mediaupload").show(),t.parents(".entry").find(".imagearea").addClass("hide"))})}),$(".thumbactions a.makepreview").on("click",function(){var e=$(this).parents(".entry").find('[data-type="image"]').val();$(".imagepr_wrap").html(""),$(".previewshow").hide(),$(".preview-placeholder").show(),$("#upwthumb").val(""),n(e)}),$(".getimageurl").on("click",function(e){var t=$(this),i=$(this).attr("data-target");swal({title:"Enter the image's URL!",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Url to image"},function(e){return e===!1?!1:""===e?(swal.showInputError("You need to write something!"),!1):null==e.match(/\.(jpeg|jpg|gif|png)$/)?(swal.showInputError("Not valid image url!"),!1):("preview"==i?n(e):a(t,e),void swal({title:"",timer:1}))})})},i=function(){"none"==$(".lists-types a.selected").attr("data-order")||0==$(".lists-types a.selected").length?$(".ordering").addClass("noorder"):$(".ordering").removeClass("noorder");var e=$(".entry").length,t=$(".lists-types a.selected").attr("data-order");$(".entry").each(function(i){act=Math.ceil(i),"desc"==t?num=e-act:num=act+1,$(this).find(".order-number").text(num)})},n=function(e){""==$("#upwthumb").val()&&($(".imagepr_wrap").html('<img src="'+e+'" >'),$(".previewshow").show(),$(".preview-placeholder").hide(),$("#upwthumb").val(e))},a=function(e,t){e.parents(".entry").find(".imagearea_img").html('<img src="'+t+'" >'),e.parents(".entry").find(".cd-input-image").val(t),e.parents(".inpunting").hide(),e.parents(".entry").find(".imagearea").removeClass("hide")},o=function(){$(".uploadaimage").off("click").on("change",function(){NProgress.inc(),App.initLoadingCaption("show");var e=$(this);e.attr("name","file").parents("form").attr("method","POST").attr("enctype","multipart/form-data");var t=$("input[name='_token']").val();e.parents("form").append('<input name="_token" type="hidden" value="'+t+'">');var i="/upload-a-image?type="+e.attr("data-vtype");e.parents("form").ajaxSubmit({url:i,dataType:"json",success:function(t){t.errors?swal(t.status,t.errors,"error"):e.hasClass("preview")?n(t.path):(a(e,t.path),n(t.path)),App.initLoadingCaption("hide"),NProgress.done(!0)}})})},r=function(){$(".createvideo").on("click",function(){var e=$(this).parent("div").find("input").val(),t=e.match(/^(?:http(?:s)?:\/\/)?(?:[a-z0-9.]+\.)?(?:youtu\.be|youtube\.com)\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/)([^\?&\"'>]+)/),i=e.match(/^(?:http(?:s)?:\/\/)?(?:[a-z0-9.]+\.)?vimeo\.com\/([0-9]+)$/),a=e.match(/^(?:http(?:s)?:\/\/)?(?:[a-z0-9.]+\.)?dailymotion\.com\/video\/([0-9a-z]+)$/);if(t&&11==t[1].length)videoembed='<iframe src="//www.youtube.com/embed/'+t[1]+'" width="100%" height="400" frameborder="0" allowfullscreen></iframe>',videores="http://img.youtube.com/vi/"+t[1]+"/hqdefault.jpg",n(videores);else if(i)videoembed='<iframe src="//player.vimeo.com/video/'+i[1]+'" width="100%" height="400" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else{if(!a)return swal("Invalid Url","Please try full link of video","warning"),!1;videoembed='<iframe src="//www.dailymotion.com/embed/video/'+a[1]+'" width="100%" height="400" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}$(this).parents(".inpunting").hide(),$(this).parents(".entry").find(".embedarea").removeClass("hide"),$(this).parents(".entry").find(".videoembed").html(videoembed),$(this).parents(".entry").find(".cd-input-video").val(videoembed)})},l=function(){Simditor.i18n={en_EN:{normalText:"Normal Text",title:"Title",blockquote:"Blockquote",bold:"Bold",italic:"Italic",link:"Link",text:"Text",linkText:"Link text",linkUrl:"URL",removeLink:"Remove Link",ol:"Number List",ul:"List",strikethrough:"Strikethrough",underline:"Underline"},tr_TR:{normalText:"Düz yazı",title:"Başlık",blockquote:"Alıntı",bold:"Kalın",italic:"İtalic",link:"Link",text:"Yazı",linkText:"Link text",linkUrl:"URL",removeLink:"Link Sil",ol:"Liste ordonnée",ul:"Liste à puces",strikethrough:"Barré",underline:"Altı çizgili"}},Simditor.locale="en_EN",$(".message").each(function(e,t){0==$(this).parents(".entry").find(".simditor").length&&new Simditor({textarea:$(t),upload:!1,tabIndent:!1,toolbar:["bold","italic","underline","strikethrough","|","ul","blockquote","link"],toolbarFloat:!1,toolbarFloatOffset:35})})},s=function(){$("#PostAction").on("click",function(){NProgress.inc(),App.initLoadingCaption("show");var e=[];if(0==$("#entries .entry").length)return swal("Add some entry"),NProgress.done(!0),App.initLoadingCaption("hide"),!1;$("#entries .entry").each(function(t,i){var n=$(this).attr("data-type");(null==typeof n||""==n||void 0==n)&&(n=null);var a=$(this).find('[data-type="title"]').val();(null==typeof a||""==a||void 0==a)&&(a=null);var o=$(this).find('[data-type="body"]').val();(null==typeof o||""==o||void 0==o)&&(o=null);var r=$(this).find('[data-type="image"]').val();(null==typeof r||""==r||void 0==r)&&(r=null);var l=$(this).find('[data-type="video"]').val();(null==typeof l||""==l||void 0==l)&&(l=null);var s=$(this).find('[data-type="source"]').val();(null==typeof s||""==s||void 0==s)&&(s=null),"text"==n?e[t]={type:n,title:a,body:o,source:s}:"image"==n?e[t]={type:n,title:a,body:o,source:s,image:r}:"video"==n?e[t]={type:n,title:a,body:o,source:s,video:l}:"poll"==n?e[t]={type:n,title:a,body:o}:"embed"==n?e[t]={type:n,title:a,body:o,source:s,video:l}:e[t]={type:n,title:a,body:o,image:r,source:s}});var t=$(this).closest("form"),i=t.find(".question-post-form").attr("data-type"),n=t.attr("action"),a=t.find("input[name=_token]").val(),o=t.find("input[name=headline]").val(),r=t.find("textarea[name=description]").val(),l=t.find("select[name=category]").val(),s=t.find("input[name=thumb]").val(),d=t.find(".lists-types a.selected").attr("data-order");return(null==typeof d||""==d||void 0==d)&&(d=null),$(".lists-types").length>0&&0==$(".lists-types a.selected").length?(swal("Cooise list type"),NProgress.done(!0),App.initLoadingCaption("hide"),!1):void $.post(n,{title:o,description:r,category:l,type:i,ordertype:d,thumb:s,_token:a,entrys:e},function(e){e.errors?(App.initLoadingCaption("hide"),NProgress.done(!0),swal(e.status,e.errors)):setTimeout(function(){App.initLoadingCaption("hide"),NProgress.done(!0),location.href=e.url},1500)},"json")})};return{init:function(){NProgress.set(.4),e(),s(),this.initAjax(),NProgress.done(!0)},initAjax:function(){r(),o()},EditorInit:function(){l(),t(),i()},initImageUpluad:function(){o()},initVideoGet:function(){r()}}}();